###########################################
# Pod和Node之间的部署关系， 每次故障都是不一样的。
# 这个文件只手动记录不变的部分， Pod和Node的关系需要在append在后面
###########################################

###########################################
# Nodes
###########################################
- class: node
  type: Service
  params:
    id:
  id: "{id}"
  metrics:
    - "{id}##count"
    - "{id}##cost"
    - "{id}##proc"
    - "{id}##succ_rate"

- class: node
  type: Mongo
  params:
    id:

- class: node
  type: JVM
  params:
    id:

- class: node
  type: Pod
  params:
    id:
      - ts-admin-basic-info-service-0
      - ts-admin-order-service-0
      - ts-admin-route-service-0
      - ts-admin-travel-service-0
      - ts-admin-user-service-0
      - ts-assurance-mongo-0
      - ts-assurance-service-0
      - ts-auth-mongo-0
      - ts-auth-service-0
      - ts-auth-service-1
      - ts-avatar-service-0
      - ts-avatar-service-1
      - ts-basic-service-0
      - ts-basic-service-1
      - ts-basic-service-2
      - ts-cancel-service-0
      - ts-cancel-service-1
      - ts-config-mongo-0
      - ts-config-service-0
      - ts-config-service-1
      - ts-consign-mongo-0
      - ts-consign-price-mongo-0
      - ts-consign-price-service-0
      - ts-consign-price-service-1
      - ts-consign-service-0
      - ts-consign-service-1
      - ts-contacts-mongo-0
      - ts-contacts-service-0
      - ts-contacts-service-1
      - ts-execute-service-0
      - ts-execute-service-1
      - ts-food-map-mongo-0
      - ts-food-map-service-0
      - ts-food-map-service-1
      - ts-food-mongo-0
      - ts-food-service-0
      - ts-food-service-1
      - ts-inside-payment-mongo-0
      - ts-inside-payment-service-0
      - ts-inside-payment-service-1
      - ts-news-service-0
      - ts-news-service-1
      - ts-notification-service-0
      - ts-notification-service-1
      - ts-order-mongo-0
      - ts-order-other-mongo-0
      - ts-order-other-service-0
      - ts-order-other-service-1
      - ts-order-service-0
      - ts-order-service-1
      - ts-order-service-2
      - ts-payment-mongo-0
      - ts-payment-service-0
      - ts-payment-service-1
      - ts-payment-service-2
      - ts-preserve-other-service-0
      - ts-preserve-other-service-1
      - ts-preserve-service-0
      - ts-preserve-service-1
      - ts-price-mongo-0
      - ts-price-service-0
      - ts-price-service-1
      - ts-rebook-service-0
      - ts-rebook-service-1
      - ts-route-mongo-0
      - ts-route-plan-service-0
      - ts-route-plan-service-1
      - ts-route-service-0
      - ts-route-service-1
      - ts-seat-service-0
      - ts-seat-service-1
      - ts-security-mongo-0
      - ts-security-service-0
      - ts-security-service-1
      - ts-station-mongo-0
      - ts-station-service-0
      - ts-station-service-1
      - ts-station-service-2
      - ts-ticket-office-mongo-0
      - ts-ticket-office-service-0
      - ts-ticket-office-service-1
      - ts-ticketinfo-service-0
      - ts-ticketinfo-service-1
      - ts-train-mongo-0
      - ts-train-service-0
      - ts-train-service-1
      - ts-train-service-2
      - ts-travel-mongo-0
      - ts-travel-plan-service-0
      - ts-travel-plan-service-1
      - ts-travel-service-0
      - ts-travel-service-1
      - ts-travel-service-2
      - ts-travel2-mongo-0
      - ts-travel2-service-0
      - ts-travel2-service-1
      - ts-ui-dashboard-0
      - ts-user-mongo-0
      - ts-user-service-0
      - ts-user-service-1
      - ts-user-service-2
      - ts-verification-code-service-0
      - ts-verification-code-service-1
      - ts-voucher-mysql-0
      - ts-voucher-service-0
      - ts-voucher-service-1
      - ts-voucher-service-2
  id: "{id}"
  metrics:
    - "{id}##fake"

- class: node
  type: Node
  params:
    id:
      - node1
      - node2
      - node3
      - node4
      - node5
      - node6
  id: "{id}"
  metrics:
    - "{id}##fake"


###########################################
# Node Nodes
###########################################
- class: node
  type: Node CPU
  params:
    id:
      - node1
      - node2
      - node3
      - node4
      - node5
      - node6
  name: "{id} CPU"
  metrics:
    - "{id}##cpu_busy_system"
    - "{id}##cpu_busy_user"
    - "{id}##cpu_busy_user_nice"
    - "{id}##cpu_busy_IOWait"
    - "{id}##cpu_busy_IRQs"
    - "{id}##cpu_busy_softIRQs"
    - "{id}##cpu_busy_steal"
    - "{id}##cpu_busy_guest"
    - "{id}##cpu_busy_others"

- class: node
  type: Node Memory
  params:
    id:
      - node1
      - node2
      - node3
      - node4
      - node5
      - node6
  name: "{id} Memory"
  metrics:
    - "{id}##memory_inactive_bytes"
    - "{id}##memory_active_bytes"
    - "{id}##memory_committed_AS_bytes"
    - "{id}##memory_commit_limit_bytes"
    - "{id}##memory_inactive_file_bytes"
    - "{id}##memory_inactive_anon_bytes"
    - "{id}##memory_active_file_bytes"
    - "{id}##memory_active_anon_bytes"
    - "{id}##memory_writeback_bytes"
    - "{id}##memory_writeback_tmp_bytes"
    - "{id}##memory_dirty_bytes"
    - "{id}##memory_mapped_bytes"
    - "{id}##memory_shmem_bytes"
    - "{id}##memory_shmem_huge_pages_bytes"
    - "{id}##memory_shmem_pmd_mapped_bytes"
    - "{id}##memory_S_unreclaim_bytes"
    - "{id}##memory_S_reclaimable_bytes"
    - "{id}##memory_Vmalloc_chunk_bytes"
    - "{id}##memory_Vmalloc_total_bytes"
    - "{id}##memory_Vmalloc_used_bytes"
    - "{id}##memory_anon_huge_pages_bytes"
    - "{id}##memory_anon_pages_bytes"
    - "{id}##memory_kernel_stack_bytes"
    - "{id}##memory_per_cpu_bytes"
    - "{id}##memory_huge_pages_bytes"
    - "{id}##memory_huge_page_size_bytes"
    - "{id}##memory_direct_map_1G_bytes"
    - "{id}##memory_direct_map_2M_bytes"
    - "{id}##memory_direct_map_4K_bytes"
    - "{id}##memory_unevitable_bytes"
    - "{id}##memory_Mlocked_bytes"
    - "{id}##memory_pages_in"
    - "{id}##memory_pages_out"
    - "{id}##memory_pages_fault"
    - "{id}##memory_pages_major_fault"
    - "{id}##memory_pages_minor_fault"

- class: node
  type: Node Disk
  params:
    id:
      - node1
      - node2
      - node3
      - node4
      - node5
      - node6
  name: "{id} Disk"
  metrics:
    - "{id}##disk_reads_completed_total"
    - "{id}##disk_writes_completed_total"
    - "{id}##disk_read_bytes_total"
    - "{id}##disk_written_bytes_total"
    - "{id}##disk_average_read_wait_time"
    - "{id}##disk_average_write_wait_time"
    - "{id}##disk_average_queue_size"

- class: node
  type: Node Network
  params:
    id:
      - node1
      - node2
      - node3
      - node4
      - node5
      - node6
  name: "{id} Network"
  metrics:
    - "{id}##network_receive_error_packets"
    - "{id}##network_transmit_error_packets"
    - "{id}##network_receive_drop_packets"
    - "{id}##network_transmit_drop_packets"
    - "{id}##network_receive_compressed_packets"
    - "{id}##network_transmit_compressed_packets"
    - "{id}##network_udp_in_errors"
    - "{id}##network_udp_no_ports"
    - "{id}##network_udp_lite_in_errors"
    - "{id}##network_udp_rcv_buf_errors"
    - "{id}##network_udp_snd_buf_errors"
    - "{id}##network_tcp_in_segs"
    - "{id}##network_tcp_out_segs"

###########################################
# Pod Nodes
###########################################
- class: node
  type: Pod CPU
  params:
    id:
      - ts-admin-basic-info-service-0
      - ts-admin-order-service-0
      - ts-admin-route-service-0
      - ts-admin-travel-service-0
      - ts-admin-user-service-0
      - ts-assurance-mongo-0
      - ts-assurance-service-0
      - ts-auth-mongo-0
      - ts-auth-service-0
      - ts-auth-service-1
      - ts-avatar-service-0
      - ts-avatar-service-1
      - ts-basic-service-0
      - ts-basic-service-1
      - ts-basic-service-2
      - ts-cancel-service-0
      - ts-cancel-service-1
      - ts-config-mongo-0
      - ts-config-service-0
      - ts-config-service-1
      - ts-consign-mongo-0
      - ts-consign-price-mongo-0
      - ts-consign-price-service-0
      - ts-consign-price-service-1
      - ts-consign-service-0
      - ts-consign-service-1
      - ts-contacts-mongo-0
      - ts-contacts-service-0
      - ts-contacts-service-1
      - ts-execute-service-0
      - ts-execute-service-1
      - ts-food-map-mongo-0
      - ts-food-map-service-0
      - ts-food-map-service-1
      - ts-food-mongo-0
      - ts-food-service-0
      - ts-food-service-1
      - ts-inside-payment-mongo-0
      - ts-inside-payment-service-0
      - ts-inside-payment-service-1
      - ts-news-service-0
      - ts-news-service-1
      - ts-notification-service-0
      - ts-notification-service-1
      - ts-order-mongo-0
      - ts-order-other-mongo-0
      - ts-order-other-service-0
      - ts-order-other-service-1
      - ts-order-service-0
      - ts-order-service-1
      - ts-order-service-2
      - ts-payment-mongo-0
      - ts-payment-service-0
      - ts-payment-service-1
      - ts-payment-service-2
      - ts-preserve-other-service-0
      - ts-preserve-other-service-1
      - ts-preserve-service-0
      - ts-preserve-service-1
      - ts-price-mongo-0
      - ts-price-service-0
      - ts-price-service-1
      - ts-rebook-service-0
      - ts-rebook-service-1
      - ts-route-mongo-0
      - ts-route-plan-service-0
      - ts-route-plan-service-1
      - ts-route-service-0
      - ts-route-service-1
      - ts-seat-service-0
      - ts-seat-service-1
      - ts-security-mongo-0
      - ts-security-service-0
      - ts-security-service-1
      - ts-station-mongo-0
      - ts-station-service-0
      - ts-station-service-1
      - ts-station-service-2
      - ts-ticket-office-mongo-0
      - ts-ticket-office-service-0
      - ts-ticket-office-service-1
      - ts-ticketinfo-service-0
      - ts-ticketinfo-service-1
      - ts-train-mongo-0
      - ts-train-service-0
      - ts-train-service-1
      - ts-train-service-2
      - ts-travel-mongo-0
      - ts-travel-plan-service-0
      - ts-travel-plan-service-1
      - ts-travel-service-0
      - ts-travel-service-1
      - ts-travel-service-2
      - ts-travel2-mongo-0
      - ts-travel2-service-0
      - ts-travel2-service-1
      - ts-ui-dashboard-0
      - ts-user-mongo-0
      - ts-user-service-0
      - ts-user-service-1
      - ts-user-service-2
      - ts-verification-code-service-0
      - ts-verification-code-service-1
      - ts-voucher-mysql-0
      - ts-voucher-service-0
      - ts-voucher-service-1
      - ts-voucher-service-2
  id: "{id} CPU"
  metrics:
    - "{id}##cpu_usage"
    - "{id}##cpu_system_usage"
    - "{id}##cpu_user_usage"

- class: node
  type: Pod Memory
  params:
    id:
      - ts-admin-basic-info-service-0
      - ts-admin-order-service-0
      - ts-admin-route-service-0
      - ts-admin-travel-service-0
      - ts-admin-user-service-0
      - ts-assurance-mongo-0
      - ts-assurance-service-0
      - ts-auth-mongo-0
      - ts-auth-service-0
      - ts-auth-service-1
      - ts-avatar-service-0
      - ts-avatar-service-1
      - ts-basic-service-0
      - ts-basic-service-1
      - ts-basic-service-2
      - ts-cancel-service-0
      - ts-cancel-service-1
      - ts-config-mongo-0
      - ts-config-service-0
      - ts-config-service-1
      - ts-consign-mongo-0
      - ts-consign-price-mongo-0
      - ts-consign-price-service-0
      - ts-consign-price-service-1
      - ts-consign-service-0
      - ts-consign-service-1
      - ts-contacts-mongo-0
      - ts-contacts-service-0
      - ts-contacts-service-1
      - ts-execute-service-0
      - ts-execute-service-1
      - ts-food-map-mongo-0
      - ts-food-map-service-0
      - ts-food-map-service-1
      - ts-food-mongo-0
      - ts-food-service-0
      - ts-food-service-1
      - ts-inside-payment-mongo-0
      - ts-inside-payment-service-0
      - ts-inside-payment-service-1
      - ts-news-service-0
      - ts-news-service-1
      - ts-notification-service-0
      - ts-notification-service-1
      - ts-order-mongo-0
      - ts-order-other-mongo-0
      - ts-order-other-service-0
      - ts-order-other-service-1
      - ts-order-service-0
      - ts-order-service-1
      - ts-order-service-2
      - ts-payment-mongo-0
      - ts-payment-service-0
      - ts-payment-service-1
      - ts-payment-service-2
      - ts-preserve-other-service-0
      - ts-preserve-other-service-1
      - ts-preserve-service-0
      - ts-preserve-service-1
      - ts-price-mongo-0
      - ts-price-service-0
      - ts-price-service-1
      - ts-rebook-service-0
      - ts-rebook-service-1
      - ts-route-mongo-0
      - ts-route-plan-service-0
      - ts-route-plan-service-1
      - ts-route-service-0
      - ts-route-service-1
      - ts-seat-service-0
      - ts-seat-service-1
      - ts-security-mongo-0
      - ts-security-service-0
      - ts-security-service-1
      - ts-station-mongo-0
      - ts-station-service-0
      - ts-station-service-1
      - ts-station-service-2
      - ts-ticket-office-mongo-0
      - ts-ticket-office-service-0
      - ts-ticket-office-service-1
      - ts-ticketinfo-service-0
      - ts-ticketinfo-service-1
      - ts-train-mongo-0
      - ts-train-service-0
      - ts-train-service-1
      - ts-train-service-2
      - ts-travel-mongo-0
      - ts-travel-plan-service-0
      - ts-travel-plan-service-1
      - ts-travel-service-0
      - ts-travel-service-1
      - ts-travel-service-2
      - ts-travel2-mongo-0
      - ts-travel2-service-0
      - ts-travel2-service-1
      - ts-ui-dashboard-0
      - ts-user-mongo-0
      - ts-user-service-0
      - ts-user-service-1
      - ts-user-service-2
      - ts-verification-code-service-0
      - ts-verification-code-service-1
      - ts-voucher-mysql-0
      - ts-voucher-service-0
      - ts-voucher-service-1
      - ts-voucher-service-2
  id: "{id} Memory"
  metrics:
    - "{id}##memory_usage_bytes"
    - "{id}##memory_working_set_bytes"
    - "{id}##memory_rss_bytes"
    - "{id}##memory_mapped_file_bytes"
    - "{id}##memory_cache_bytes"
    - "{id}##memory_failures_total"

- class: node
  type: Pod Network
  params:
    id:
      - ts-admin-basic-info-service-0
      - ts-admin-order-service-0
      - ts-admin-route-service-0
      - ts-admin-travel-service-0
      - ts-admin-user-service-0
      - ts-assurance-mongo-0
      - ts-assurance-service-0
      - ts-auth-mongo-0
      - ts-auth-service-0
      - ts-auth-service-1
      - ts-avatar-service-0
      - ts-avatar-service-1
      - ts-basic-service-0
      - ts-basic-service-1
      - ts-basic-service-2
      - ts-cancel-service-0
      - ts-cancel-service-1
      - ts-config-mongo-0
      - ts-config-service-0
      - ts-config-service-1
      - ts-consign-mongo-0
      - ts-consign-price-mongo-0
      - ts-consign-price-service-0
      - ts-consign-price-service-1
      - ts-consign-service-0
      - ts-consign-service-1
      - ts-contacts-mongo-0
      - ts-contacts-service-0
      - ts-contacts-service-1
      - ts-execute-service-0
      - ts-execute-service-1
      - ts-food-map-mongo-0
      - ts-food-map-service-0
      - ts-food-map-service-1
      - ts-food-mongo-0
      - ts-food-service-0
      - ts-food-service-1
      - ts-inside-payment-mongo-0
      - ts-inside-payment-service-0
      - ts-inside-payment-service-1
      - ts-news-service-0
      - ts-news-service-1
      - ts-notification-service-0
      - ts-notification-service-1
      - ts-order-mongo-0
      - ts-order-other-mongo-0
      - ts-order-other-service-0
      - ts-order-other-service-1
      - ts-order-service-0
      - ts-order-service-1
      - ts-order-service-2
      - ts-payment-mongo-0
      - ts-payment-service-0
      - ts-payment-service-1
      - ts-payment-service-2
      - ts-preserve-other-service-0
      - ts-preserve-other-service-1
      - ts-preserve-service-0
      - ts-preserve-service-1
      - ts-price-mongo-0
      - ts-price-service-0
      - ts-price-service-1
      - ts-rebook-service-0
      - ts-rebook-service-1
      - ts-route-mongo-0
      - ts-route-plan-service-0
      - ts-route-plan-service-1
      - ts-route-service-0
      - ts-route-service-1
      - ts-seat-service-0
      - ts-seat-service-1
      - ts-security-mongo-0
      - ts-security-service-0
      - ts-security-service-1
      - ts-station-mongo-0
      - ts-station-service-0
      - ts-station-service-1
      - ts-station-service-2
      - ts-ticket-office-mongo-0
      - ts-ticket-office-service-0
      - ts-ticket-office-service-1
      - ts-ticketinfo-service-0
      - ts-ticketinfo-service-1
      - ts-train-mongo-0
      - ts-train-service-0
      - ts-train-service-1
      - ts-train-service-2
      - ts-travel-mongo-0
      - ts-travel-plan-service-0
      - ts-travel-plan-service-1
      - ts-travel-service-0
      - ts-travel-service-1
      - ts-travel-service-2
      - ts-travel2-mongo-0
      - ts-travel2-service-0
      - ts-travel2-service-1
      - ts-ui-dashboard-0
      - ts-user-mongo-0
      - ts-user-service-0
      - ts-user-service-1
      - ts-user-service-2
      - ts-verification-code-service-0
      - ts-verification-code-service-1
      - ts-voucher-mysql-0
      - ts-voucher-service-0
      - ts-voucher-service-1
      - ts-voucher-service-2
  id: "{id} Network"
  metrics:
    - "{id}##network_receive_packets_total"
    - "{id}##network_transmit_packets_total"
    - "{id}##network_receive_bytes_total"
    - "{id}##network_transmit_bytes_total"
    - "{id}##network_receive_errors_total"
    - "{id}##network_transmit_errors_total"
    - "{id}##network_receive_packets_dropped_total"
    - "{id}##network_transmit_packets_dropped_total"
